!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("p5.OffscreenCanvas",[],t):"object"==typeof exports?exports["p5.OffscreenCanvas"]=t():e["p5.OffscreenCanvas"]=t()}(this,(()=>(()=>{p5.prototype.createOffscreenCanvas=function(t,s,n){if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas is not supported by this browser!");return new e(t,s,n,this)};class e{constructor(e,t,s,n){const r=s||n.P2D;this.canvas=new OffscreenCanvas(e,t),this.canvas.context=this.canvas.getContext(r===n.WEBGL?"webgl":"2d"),this.canvas.style={};for(const e in p5.prototype)this[e]||("function"==typeof p5.prototype[e]?this[e]=p5.prototype[e].bind(this):this[e]=p5.prototype[e]);return p5.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=n._pixelDensity,r===n.WEBGL?this._renderer=new p5.RendererGL(this.canvas,n,!1):this._renderer=new p5.Renderer2D(this.canvas,n,!1),n._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(e,t),this._renderer._applyDefaults(),this}reset(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}remove(){const e=this._pInst._elements.indexOf(this);-1!==e&&this._pInst._elements.splice(e,1)}currentFrame(){return this.canvas.transferToImageBitmap()}currentBlob(e,t){if(!t)return this.canvas.convertToBlob(e);this.canvas.convertToBlob(e).then(t)}}return{}})()));